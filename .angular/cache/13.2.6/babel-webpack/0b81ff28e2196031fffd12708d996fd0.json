{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { AddCustomerFormComponent } from \"../../shared/components/add-customer-form/add-customer-form.component\";\nimport { EditCustomerFormComponent } from \"../../shared/components/edit-customer-form/edit-customer-form.component\";\nimport { getCustomers, getLoading } from 'src/app/core';\nimport { customersGetAllRequest } from 'src/app/core/customers/actions';\nimport { map, takeUntil } from 'rxjs/operators';\nimport { of, Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@ngrx/store\";\nimport * as i3 from \"../../shared/components/search-form/search-form.component\";\nimport * as i4 from \"../../shared/components/button-main/button-main.component\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/material/sort\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/paginator\";\nimport * as i9 from \"@angular/material/progress-spinner\";\nimport * as i10 from \"../../shared/pipes/map-arr.pipe\";\nimport * as i11 from \"@ngrx/component\";\nconst _c0 = [\"addProductModal\"];\nconst _c1 = [\"replaceCatalogModal\"];\n\nfunction CustomersPageComponent_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"Customer No\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomersPageComponent_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵlistener(\"click\", function CustomersPageComponent_td_7_Template_td_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const row_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.editCustomer($event, row_r13);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r13.customerNo, \" \");\n  }\n}\n\nfunction CustomersPageComponent_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 20);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomersPageComponent_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r16.name, \" \");\n  }\n}\n\nfunction CustomersPageComponent_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 20);\n    i0.ɵɵtext(1, \"Delivery Address\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomersPageComponent_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r17.deliveryAddress, \" \");\n  }\n}\n\nfunction CustomersPageComponent_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 20);\n    i0.ɵɵtext(1, \"Delivery Days\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomersPageComponent_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"mapArr\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, row_r18.deliveryDays, \" \"), \" \");\n  }\n}\n\nfunction CustomersPageComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 22);\n  }\n}\n\nfunction CustomersPageComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 23);\n    i0.ɵɵlistener(\"click\", function CustomersPageComponent_tr_18_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const row_r19 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.clickedRowsEdit(row_r19);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomersPageComponent_tr_19_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"h4\");\n    i0.ɵɵtext(2, \"No Data to Display\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Seems like you don\\u2019t have any\");\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6, \" product yet. Let\\u2019s create it now! \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 28);\n    i0.ɵɵelement(8, \"rect\", 29);\n    i0.ɵɵelementStart(9, \"svg\", 30);\n    i0.ɵɵelement(10, \"path\", 31);\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction CustomersPageComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 24)(1, \"td\", 25);\n    i0.ɵɵtemplate(2, CustomersPageComponent_tr_19_div_2_Template, 11, 0, \"div\", 26);\n    i0.ɵɵpipe(3, \"ngrxPush\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n\n    const _r11 = i0.ɵɵreference(22);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 2, ctx_r10.isLoading))(\"ngIfElse\", _r11);\n  }\n}\n\nfunction CustomersPageComponent_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 32);\n  }\n}\n\nconst _c2 = function () {\n  return [5, 10, 25, 100];\n};\n\nexport let CustomersPageComponent = /*#__PURE__*/(() => {\n  class CustomersPageComponent {\n    constructor(dialog, cdr, store) {\n      this.dialog = dialog;\n      this.cdr = cdr;\n      this.store = store;\n      this.isLoading = of(false);\n      this.AddCustomerFormComponent = AddCustomerFormComponent;\n      this.name = \"Customers\";\n      this.displayedColumns = [\"customerNo\", \"name\", \"deliveryAddress\", \"deliveryDays\"];\n      this.columnsToDisplay = this.displayedColumns.slice();\n      this.unsub$ = new Subject();\n\n      this.applyFilter = event => {\n        const filterValue = event.target.value;\n        this.dataSource.filter = filterValue.trim().toLowerCase();\n\n        if (this.dataSource.paginator) {\n          this.dataSource.paginator.firstPage();\n        }\n      };\n    }\n\n    ngOnInit() {\n      this.dataSource = new MatTableDataSource([]);\n    }\n\n    ngAfterViewInit() {\n      this.store.select(getCustomers).pipe(takeUntil(this.unsub$)).subscribe(customers => {\n        if (customers.length === 0) {\n          this.store.dispatch(customersGetAllRequest());\n        }\n\n        this.dataSource = new MatTableDataSource(customers);\n        this.dataSource.paginator = this.paginator;\n        this.dataSource.sort = this.sort;\n      });\n      this.isLoading = this.store.select(getLoading).pipe(map(load => !load));\n      this.cdr.detectChanges();\n    }\n\n    clickedRowsEdit(v) {\n      console.log(v);\n    }\n\n    editCustomer(e, row) {\n      const dialogRef = this.dialog.open(EditCustomerFormComponent, {\n        data: row\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          console.log(`editCustomer Dialog result: ${result}`);\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      this.unsub$.next(null);\n      this.unsub$.complete();\n    }\n\n  }\n\n  CustomersPageComponent.ɵfac = function CustomersPageComponent_Factory(t) {\n    return new (t || CustomersPageComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Store));\n  };\n\n  CustomersPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CustomersPageComponent,\n    selectors: [[\"app-customers-page\"]],\n    viewQuery: function CustomersPageComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.addProductModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.replaceCatalogModal = _t.first);\n      }\n    },\n    decls: 23,\n    vars: 10,\n    consts: [[3, \"applyFilter\", \"placeholder\"], [1, \"btn-absolut-container\"], [3, \"nameBtn\", \"modalComponent\"], [1, \"mat-elevation-z8\", \"table--container\"], [\"mat-table\", \"\", \"matSort\", \"\", \"multiTemplateDataRows\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"customerNo\"], [\"class\", \"headers-table-customers\", \"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"class\", \"edit-cell\", \"mat-cell\", \"\", 3, \"click\", 4, \"matCellDef\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"deliveryAddress\"], [\"matColumnDef\", \"deliveryDays\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 3, \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"width\", \"100%\", \"class\", \"mat-row-no-data\", 4, \"matNoDataRow\"], [\"showFirstLastButtons\", \"\", 1, \"container-paginator\", 3, \"pageSize\", \"pageSizeOptions\"], [\"loader\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 1, \"headers-table-customers\"], [\"mat-cell\", \"\", 1, \"edit-cell\", 3, \"click\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"click\"], [\"width\", \"100%\", 1, \"mat-row-no-data\"], [\"width\", \"100%\", \"top\", \"50%\", \"colspan\", \"6\", 1, \"mat-cell\", \"no-data-cell\"], [\"class\", \"no-data-container\", 4, \"ngIf\", \"ngIfElse\"], [1, \"no-data-container\"], [\"width\", \"88\", \"height\", \"88\", \"viewBox\", \"0 0 88 88\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"width\", \"88\", \"height\", \"88\", \"rx\", \"44\", \"fill\", \"#C5DCFA\", \"fill-opacity\", \"0.5\"], [\"preserveAspectRatio\", \"xMidYMid meet\", \"viewBox\", \"-19 -1 90 60\", \"width\", \"100%\", \"height\", \"100%\"], [\"fill-rule\", \"evenodd\", \"clip-rule\", \"evenodd\", \"d\", \"M0.333252 8.3335C0.333252 3.91522 3.91497 0.333496 8.33325 0.333496H45.6666C50.0849 0.333496 53.6666 3.91522 53.6666 8.3335V48.3335C53.6666 51.279 51.2788 53.6668 48.3333 53.6668H16.7271C16.5971 53.6763 16.4657 53.6812 16.3333 53.6812H5.66659C2.72107 53.6812 0.333252 51.2933 0.333252 48.3478V8.3335ZM8.33325 5.66683H45.6666C47.1393 5.66683 48.3333 6.86074 48.3333 8.3335V32.3335H37.6666C34.7211 32.3335 32.3333 34.7213 32.3333 37.6668V40.3335H21.6666V37.6812C21.6666 34.7356 19.2788 32.3478 16.3333 32.3478H5.66659V8.3335C5.66659 6.86074 6.86049 5.66683 8.33325 5.66683Z\", \"fill\", \"#1672EC\"], [1, \"spinner-container\"]],\n    template: function CustomersPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-search-form\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"app-button-main\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"table\", 4);\n        i0.ɵɵelementContainerStart(5, 5);\n        i0.ɵɵtemplate(6, CustomersPageComponent_th_6_Template, 2, 0, \"th\", 6);\n        i0.ɵɵtemplate(7, CustomersPageComponent_td_7_Template, 2, 1, \"td\", 7);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(8, 8);\n        i0.ɵɵtemplate(9, CustomersPageComponent_th_9_Template, 2, 0, \"th\", 9);\n        i0.ɵɵtemplate(10, CustomersPageComponent_td_10_Template, 2, 1, \"td\", 10);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(11, 11);\n        i0.ɵɵtemplate(12, CustomersPageComponent_th_12_Template, 2, 0, \"th\", 9);\n        i0.ɵɵtemplate(13, CustomersPageComponent_td_13_Template, 2, 1, \"td\", 10);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(14, 12);\n        i0.ɵɵtemplate(15, CustomersPageComponent_th_15_Template, 2, 0, \"th\", 9);\n        i0.ɵɵtemplate(16, CustomersPageComponent_td_16_Template, 3, 4, \"td\", 10);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(17, CustomersPageComponent_tr_17_Template, 1, 0, \"tr\", 13);\n        i0.ɵɵtemplate(18, CustomersPageComponent_tr_18_Template, 1, 0, \"tr\", 14);\n        i0.ɵɵtemplate(19, CustomersPageComponent_tr_19_Template, 4, 4, \"tr\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"mat-paginator\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, CustomersPageComponent_ng_template_21_Template, 1, 0, \"ng-template\", null, 17, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"applyFilter\", ctx.applyFilter)(\"placeholder\", \"Customer No, Name, Address...\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"nameBtn\", \"Add Customer\")(\"modalComponent\", ctx.AddCustomerFormComponent);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.columnsToDisplay);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.columnsToDisplay);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"pageSize\", 5)(\"pageSizeOptions\", i0.ɵɵpureFunction0(9, _c2));\n      }\n    },\n    directives: [i3.SearchFormComponent, i4.ButtonMainComponent, i5.MatTable, i6.MatSort, i5.MatColumnDef, i5.MatHeaderCellDef, i5.MatHeaderCell, i6.MatSortHeader, i5.MatCellDef, i5.MatCell, i5.MatHeaderRowDef, i5.MatHeaderRow, i5.MatRowDef, i5.MatRow, i5.MatNoDataRow, i7.NgIf, i8.MatPaginator, i9.MatProgressSpinner],\n    pipes: [i10.MapArrPipe, i11.PushPipe],\n    styles: [\".mat-elevation-z8[_ngcontent-%COMP%]{margin:20px}table[_ngcontent-%COMP%]{width:100%}.container-paginator[_ngcontent-%COMP%]{margin:10px;background-color:#fafafa}.btn-absolut-container[_ngcontent-%COMP%]{position:absolute;top:16px;right:18px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#000}.edit-cell[_ngcontent-%COMP%]{cursor:pointer}.edit-cell[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-row-no-data[_ngcontent-%COMP%]   .mat-cell.no-data-cell[_ngcontent-%COMP%]{width:100%;margin:0 auto}.no-data-container[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:30px;display:flex;flex-direction:column;align-items:center}.spinner-container[_ngcontent-%COMP%]{margin:40px auto}  div.btn-absolut-container .mat-flat-button{background-color:#fafafa}  div.btn-absolut-container .mat-flat-button:hover{background-color:#e0e0e080;transition:.3s}  .mat-paginator-range-label{width:120px}  .mat-form-field-underline{display:none}  .mat-paginator-page-size-select .mat-form-field-flex .mat-form-field-infix{border:solid 1px #a1a1a1;border-radius:5px;padding:10px}  .mat-paginator-range-actions button{background-color:#e0e0e080;margin-right:4px}@media (max-width: 920px){.mat-elevation-z8.table--container[_ngcontent-%COMP%]{overflow:scroll;width:680px}}@media (max-width: 520px){.mat-elevation-z8.table--container[_ngcontent-%COMP%]{overflow:scroll;width:280px}}\"]\n  });\n  return CustomersPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}